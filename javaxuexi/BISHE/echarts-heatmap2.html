<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts-heatmap2.0</title>
    <script src="../beijing-taxi-50/carDatas.js"></script>
    <!-- 引入 echarts.js -->
    <!-- 这里是加载刚下好的echarts.min.js，注意路径 -->
    <script src="http://api.map.baidu.com/api?v=2.0&ak=o9sOPzQIRSWBooSUYpBcUIREzUN2O8vv"></script>
    <!--引入echarts文件-->
    <script src="echarts.min.js"></script>
    <!--引入百度地图扩展文件-->
    <script src="js/bmap.min.js"></script>
    
    <style>
        
        html, body{
            width: 100%;
            height: 100%;
        }
    </style>


</head>
<body id="body">
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width:100%;height:100%;"></div>
<!--<div ref="map" style="width: 100%;height:100%"></div>-->
<script type="text/javascript">
    //CAR_DATA为车辆数据
    const data = [];
    const data1 = [];
    const data2 = [];
    CAR_DATAS.forEach(item => {
        if(item.time[9]=='3'){
            if((item.time[11]=='0')&&(item.time[12]=='0'))
            {
                data1.push([item.lat,item.lon,1])
            }

        }
            data.push([item.lat, item.lon, 1]);


    });
    console.info(data);
    // 基于准备好的dom，初始化echarts实例
    var dom = document.getElementById("main");
    var myChart = echarts.init(dom);

    var option = {
        baseOption:{

            timeline: {
                //loop: false,
                axisType: 'category', //轴的类型
                //show: true,
                autoPlay: false,
                playInterval: 1000,
                data: ['0:00', '2:00', '4:00','6:00','8:00','10:00','12:00','14:00','16:00','18:00','20:00','22:00'],
                backgroundColor: '#0e2147',
            },


            animation: false,
            bmap: {
                center: [116.404, 39.915],
                zoom: 13,
                roam: true
            },
            visualMap: {
                show: true,
                top: 'top',
                min: 0,
                max: 20,
                seriesIndex: 0,
                calculable: true,
                inRange: {
                    color: ['blue', 'blue', 'green', 'yellow', 'red']
                },
                textStyle: {
                    color: '#ffffff'
                }
            },
            series: [{
                type: 'heatmap',
                coordinateSystem: 'bmap',
                //数据格式[[117.282699092, 31.8679422607, 45],[117.282699092,31.8669522607,43],[117.284699092,31.8669922607,32]],
                //data,
                pointSize: 9,
                blurSize: 1
            }]
        },
        options: [{
            title: {
                text: '0:00北京出租车运营情况'
            },
            series: [{
                data1,

            }]
        },
            {
                title: {
                    text: '2:00北京出租车运营情况'
                },
                series: [{
                    data2
                }]
            },
            {
                title: {
                    text: '4:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '6:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '8:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '10:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '12:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '14:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '16:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '18:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '20:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },
            {
                title: {
                    text: '22:00北京出租车运营情况'
                },
                series: [{
                    data
                }]
            },

        ]

    };
    myChart.setOption(option,true);

    var map = myChart.getModel().getComponent('bmap').getBMap();
    //map.addControl(new BMap.MapTypeControl());
    //map.centerAndZoom("合肥",12);
    map.enableScrollWheelZoom(true);






   option && myChart.setOption(option);




</script>
</body>
</html>